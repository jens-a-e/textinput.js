/*!
  FancyFileReader – A simple wrapper class to read File/Blob objects

  @license the unlicense
  @author jens alexander ewald, 2011-2014, lea.io
  @version 0.2.0
!
*/
(function(){var e=[].slice,t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1};window.FancyFileReader=function(){n.prototype.callbacks={};n.prototype.DEBUG=false;function n(e){if(!n.supported()){return false}this.reader=new FileReader;this.callbacks={loadstart:[],progress:[],load:[],abort:[],error:[],loadend:[],success:[],always:[]};this.mimes=["text/plain","text"];this.encoding="utf-8";this.setDebug(e)}n.prototype.setDebug=function(e){this.DEBUG=e;return this.DEBUG=!!this.DEBUG};n.prototype.enableDebug=function(){return this.setDebug(true)};n.prototype.enableDebug=function(){return this.setDebug(false)};n.supported=function(){var e;try{return typeof FileReader!=="undefined"&&FileReader!==null&&typeof File!=="undefined"&&File!==null}catch(t){e=t;return false}};n.prototype.bind=function(){var t,n,r,o,a;t=1<=arguments.length?e.call(arguments,0):[];a=[];for(r=0,o=t.length;r<o;r++){n=t[r];a.push(this.add_cb(n))}return a};n.prototype.add_cb=function(e){var t,n,r,o;o=[];for(t in e){n=e[t];if(this.callbacks[t]!=null){o.push(typeof(r=this.callbacks[t]).push==="function"?r.push(n):void 0)}else{o.push(void 0)}}return o};n.prototype.setEncoding=function(e){this.encoding=e};n.prototype.setAllowedFileTypes=function(){var t,n;t=1<=arguments.length?e.call(arguments,0):[];if(t==null){return}t=t.length===1?typeof(n=t[0]).split==="function"?n.split(","):void 0:void 0;return this.mimes=t!=null?t:this.mimes};n.prototype.addAllowedFileTypes=function(){var t,n,r,o,a,i;n=1<=arguments.length?e.call(arguments,0):[];if(n==null){return}n=n.length===1?typeof(r=n[0]).split==="function"?r.split(","):void 0:void 0;i=[];for(o=0,a=n.length;o<a;o++){t=n[o];i.push(this.mimes.push(t))}return i};n.prototype.read=function(e,r){var o,a,i,l,s,u,c,f,d,p,h,y,g,v,b=this;this.file=e;i=(y=r.encoding)!=null?y:this.enconding;if(!n.supported()){return false}l=new FileReader;c=[];g=this.mimes;for(f=0,p=g.length;f<p;f++){s=g[f];u=new RegExp(s,"i");c.push(u.test(this.file.type))}if(t.call(c,true)<0){a={type:"error",code:n.ERRORS.MIME_TYPE_NOT_SUPPORTED,data:"Filetype not supported",giventype:this.file.type,target:this};if(this.callbacks.error!=null){v=this.callbacks.error;for(d=0,h=v.length;d<h;d++){o=v[d];if(typeof o==="function"){o(a)}}}return false}l.onloadstart=function(e){var t,n,r,a,i,l,s;if(b.DEBUG){console.log("onloadstart",e)}if(b.callbacks.always!=null){i=b.callbacks.always;for(t=0,r=i.length;t<r;t++){o=i[t];if(typeof o==="function"){o(e)}}}if(b.callbacks.start!=null){l=b.callbacks.start;s=[];for(n=0,a=l.length;n<a;n++){o=l[n];s.push(typeof o==="function"?o(e):void 0)}return s}};l.onprogress=function(e){var t,n,r,a,i,l,s;if(b.DEBUG){console.log("onprogress",e)}if(b.callbacks.always!=null){i=b.callbacks.always;for(t=0,r=i.length;t<r;t++){o=i[t];if(typeof o==="function"){o(e)}}}if(b.callbacks.progress!=null){l=b.callbacks.progress;s=[];for(n=0,a=l.length;n<a;n++){o=l[n];s.push(typeof o==="function"?o(e):void 0)}return s}};l.onload=function(e){var t,n,r,a,i,l,s;if(b.DEBUG){console.log("onload",e)}if(b.callbacks.always!=null){i=b.callbacks.always;for(t=0,r=i.length;t<r;t++){o=i[t];if(typeof o==="function"){o(e)}}}if(b.callbacks.load!=null){l=b.callbacks.load;s=[];for(n=0,a=l.length;n<a;n++){o=l[n];s.push(typeof o==="function"?o(e):void 0)}return s}};l.onabort=function(e){var t,n,r,a,i,l,s;if(b.DEBUG){console.log("onabort",e)}if(b.callbacks.always!=null){i=b.callbacks.always;for(t=0,r=i.length;t<r;t++){o=i[t];if(typeof o==="function"){o(e)}}}if(b.callbacks.abort!=null){l=b.callbacks.abort;s=[];for(n=0,a=l.length;n<a;n++){o=l[n];s.push(typeof o==="function"?o(e):void 0)}return s}};l.onerror=function(e){var t,n,r,a,i,l,s;if(b.DEBUG){b.errorHandler(e)}if(b.DEBUG){console.log("onerror",e)}if(b.callbacks.always!=null){i=b.callbacks.always;for(t=0,r=i.length;t<r;t++){o=i[t];if(typeof o==="function"){o(e)}}}if(b.callbacks.error!=null){l=b.callbacks.error;s=[];for(n=0,a=l.length;n<a;n++){o=l[n];s.push(typeof o==="function"?o(e):void 0)}return s}};l.onloadend=function(t){var n,r,a,i,l,s,u,c,f,d,p,h;if(b.DEBUG){console.log("onloadend",t)}r=b.file.name.split(".").reverse()[0];n=/text/i.test(b.file.type);if(b.callbacks.always!=null){f=b.callbacks.always;for(a=0,l=f.length;a<l;a++){o=f[a];if(typeof o==="function"){o(t)}}}if(b.callbacks.loadend!=null){d=b.callbacks.loadend;for(i=0,s=d.length;i<s;i++){o=d[i];if(typeof o==="function"){o(t)}}}if(b.callbacks.success!=null){p=b.callbacks.success;h=[];for(c=0,u=p.length;c<u;c++){o=p[c];h.push(typeof o==="function"?o(t.target.result,e.name,r,n):void 0)}return h}};if(this.DEBUG){if(typeof console!=="undefined"&&console!==null){console.log("Mime Types: ",this.mimes,c)}if(typeof console!=="undefined"&&console!==null){console.log("Using Encoding: ",i)}}i=i===void 0||typeof i!=="string"?null:i;if(!!r.binary){return l.readAsBinaryString(this.file)}else{return l.readAsText(this.file,i)}};n.prototype.errorHandler=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:return console.error("File not found.");case e.target.error.NOT_READABLE_ERR:return console.error("Cannot read file.");case e.target.error.ABORT_ERR:return console.error("Aborted.");default:return console.error("Sorry, an unkown error occured.")}};return n}();window.FancyFileReader.works=FancyFileReader.supported();window.FancyFileReader.ERRORS={MIME_TYPE_NOT_SUPPORTED:"MIME_TYPE_NOT_SUPPORTED"}}).call(this);/*!
  Paster.js – Helps you with entering textual content via paste
  supports intentional strg/cmd + v only at the moment

  @license the unlicense
  @author jens alexander ewald, 2011-2014, lea.io
  @version 0.2.0
  @dependson FancyFileReader.js
!
*/
(function(){$(function(){return $.fn.paster=function(e){var t=this;jQuery.event.props.push("clipboardData");return this.each(function(){$(t).bind("selectstart",function(e){return typeof e.preventDefault==="function"?e.preventDefault():void 0});$(t).addClass("paster");$(t).find("textarea").remove();return $(t).click(function(t){var n;$(this).addClass("ready");$(this).find("textarea").remove();n=$('<textarea style="position:absolute;border:none;width:1;height:1;z-index:-999;opacity:0;"/>').appendTo($(this));n.one("blur",function(e){$(this).closest(".paster").removeClass("ready");return $(this).remove()});n.one("paste",function(t){var n,r,o,a,i;$(this).closest(".paster").removeClass("ready");n=(a=t.clipboardData)!=null?a:t.originalEvent.clipboardData;if(n){o=(i=n.types)!=null?i:"Text";r=typeof n.getData==="function"?n.getData(o):void 0;if(typeof e==="function"){e(r,t)}return $(this).remove()}else{return $(this).one("change keyup",function(t){if(typeof t.preventDefault==="function"){t.preventDefault()}r=$(this).val();if(typeof e==="function"){e(r,t)}return $(this).remove()})}});n.val("");return n.focus()})})}})}).call(this);/*!
  Dropper.js – helps you to read dropped files and retrieve its text value
  ... but nice and styled

  @license the unlicense
  @author jens alexander ewald, 2011-2014, lea.io
  @version 0.2.0
  @dependson FancyFileReader.js
!
*/
(function(){$(function(){$.fn.setEncoding=function(e){return this.data("encoding",e)};return $.fn.dropper=function(e,t,n){var r,o=this;this.addClass("dropper");if(!(typeof FancyFileReader!=="undefined"&&FancyFileReader!==null&&FancyFileReader.works!=null)){this.addClass("unsupported");console.error("FILE OBJECTS NOT SUPPORTED");return this}jQuery.event.props.push("dataTransfer");$(document).bind("dragover drop",function(e){return typeof e.preventDefault==="function"?e.preventDefault():void 0});this.bind("selectstart",function(e){return typeof e.preventDefault==="function"?e.preventDefault():void 0});this.removeClass("loaded success dragover dropped").bind("dragover",function(e){if(typeof e.preventDefault==="function"){e.preventDefault()}e.stopPropagation();$(this).addClass("dragover").removeClass("dropped");return false}).bind("mouseout dragend",function(){return $(this).removeClass("dragover dropped")});r={success:function(e){return $(o).addClass("success")},always:function(e){return $(o).removeClass(function(e,t){var n,r,o;o=[];n=null;r=/on\w+/gi;while(n=r.exec(t)){o.push(n[0])}return o.map(function(e){return $.trim(e)}).join(" ")}).addClass("on"+e.type)}};this.reader=new FancyFileReader;this.reader.bind(r);this.reader.bind(e);return this.bind("drop",function(n){var r,a,i,l;n.stopPropagation();n.preventDefault();$(o).removeClass("dragover sucess").addClass("dropped");a=n.dataTransfer.files[0];if(!a){return false}o.reader.setDebug($(o).data("debug"));t=(i=$(o).data("encoding"))!=null?i:o.encoding;r=(l=$(o).data("binary"))!=null?l:!!o.binary;if($(o).data("accept")){o.reader.setAllowedFileTypes($(o).data("accept"))}if(typeof e.start==="function"){e.start()}setTimeout(function(){return o.reader.read(a,{encoding:t,binary:r})},1);return null})}})}).call(this);/*!
  Filer.js – helps you to retrieve data from files, you select via a dialog
  ... but nice and styled

  @license the unlicense
  @author jens alexander ewald, 2011-2014, lea.io
  @version 0.2.0
  @dependson FancyFileReader.js
!
*/
(function(){$(function(){return $.fn.filer=function(e,t,n,r){var o,a,i,l,s=this;this.encoding=n;this.binary=r;this.addClass("filer");if(!(typeof FancyFileReader!=="undefined"&&FancyFileReader!==null&&FancyFileReader.supported!=null)){this.addClass("unsupported");console.error("FILE OBJECTS NOT SUPPORTED");return this}this.bind("selectstart",function(e){return typeof e.preventDefault==="function"?e.preventDefault():void 0});o=t!=null?t:this.data("accept").split(",");l=$(this).parent();l.remove(".filerhelper");a=$('<input type="file" accept="'+o+'" style="position:absolute; height:0!important; width:0!important; z-index:-9999!important;" class="filerhelper">');a=$(a).appendTo(l);this.click(function(e){if(typeof e.stopPropagation==="function"){e.stopPropagation()}if(typeof e.preventDefault==="function"){e.preventDefault()}$(s).removeClass("success loaded");a.click();return false});this.reader=new FancyFileReader;i={success:function(e){return $(s).addClass("success")},always:function(e){return $(s).removeClass(function(e,t){var n,r,o;o=[];n=null;r=/on\w+/gi;while(n=r.exec(t)){o.push(n[0])}return o.map(function(e){return $.trim(e)}).join(" ")}).addClass("on"+e.type)}};this.reader.bind(i);this.reader.bind(e);return a.bind("change",function(t){var o,i,l;if(typeof t.stopPropagation==="function"){t.stopPropagation()}if(typeof t.preventDefault==="function"){t.preventDefault()}o=t.target.files[0];if(!o){return false}s.reader.setDebug($(s).data("debug"));n=(i=$(s).data("encoding"))!=null?i:s.encoding;r=(l=$(s).data("binary"))!=null?l:!!s.binary;if($(s).data("accept")){s.reader.setAllowedFileTypes($(s).data("accept"))}if(typeof e.start==="function"){e.start()}setTimeout(function(){return s.reader.read(o,{encoding:n,binary:r})},1);a.val("").change();return false})}})}).call(this);;
